# ì±…ì„ í• ë‹¹í•˜ê¸°

ì±…ì„ í• ë‹¹ì€ íŠ¸ë ˆì´ë“œì˜¤í”„ í™œë™ì´ë‹¤. 

â†’ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì´ ê°€ëŠ¥í•˜ê³ , ìƒí™©ê³¼ ë¬¸ë§¥ì— ë”°ë¼ ìµœì„ ì˜ ì„ íƒì´ ë‹¬ë¼ì§„ë‹¤. ë”°ë¼ì„œ ì±…ì„ì„ ì˜¬ë°”ë¥´ê²Œ í• ë‹¹í•˜ë ¤ë©´ ì‘ì§‘ë„, ê²°í•©ë„, ìº¡ìŠí™” ê°™ì€ ë‹¤ì–‘í•œ ê¸°ì¤€ìœ¼ë¡œ ì„¤ê³„ë¥¼ í‰ê°€í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ë¥¼ ë•ëŠ” ê²ƒì´ **GRASP íŒ¨í„´**ì´ë‹¤.

## ì±…ì„ ì£¼ë„ ì„¤ê³„ë¥¼ í–¥í•´

ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ì—ì„œ ì±…ì„ ì¤‘ì‹¬ì˜ ì„¤ê³„ë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ ë‘ ê°€ì§€ ì›ì¹™

- ë°ì´í„°ë³´ë‹¤ í–‰ë™ì„ ë¨¼ì € ê²°ì •í•˜ë¼
- í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ ì±…ì„ì„ ê²°ì •í•˜ë¼

### ë°ì´í„°ë³´ë‹¤ í–‰ë™ì„ ë¨¼ì € ê²°ì •í•˜ë¼

**ê°ì²´ì§€í–¥ ì„¤ê³„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ì ì ˆí•œ ê°ì²´ì—ê²Œ ì ì ˆí•œ ì±…ì„ì„ í• ë‹¹í•˜ëŠ” ëŠ¥ë ¥ì´ë‹¤.**

- í´ë¼ì´ì–¸íŠ¸ì˜ ê´€ì ì—ì„œ ê°ì²´ê°€ í•˜ëŠ” í–‰ë™ = ê°ì²´ì˜ **ì±…ì„**
    - ê°ì²´ëŠ” í˜‘ë ¥ì— ì°¸ì—¬í•˜ê¸° ìœ„í•´ ì¡´ì¬í•˜ë©° í˜‘ë ¥ ì•ˆì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì±…ì„ì´ ê°ì²´ì˜ ì¡´ì¬ê°€ì¹˜ë¥¼ ì¦ëª…í•œë‹¤.
    - ë°ì´í„°ëŠ” ë‹¨ì§€ ì±…ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ì¬ë£Œì¼ ë¿ì´ë‹¤.
- ì˜ëª»ëœ ì ‘ê·¼
    - ê°ì²´ì˜ í–‰ë™ì´ ì•„ë‹ˆë¼ ë°ì´í„°ì— ì´ˆì ì„ ë§ì¶¤ â†’ ìº¡ìŠí™” ì•½í™” â†’ ë³€ê²½ ì·¨ì•½
    - "ì´ ê°ì²´ê°€ í¬í•¨í•´ì•¼ í•˜ëŠ” ë°ì´í„°ê°€ ë¬´ì—‡ì¸ê°€" â†’ "ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ì˜¤í¼ë ˆì´ì…˜ì€ ë¬´ì—‡ì¸ê°€"
- ì˜¬ë°”ë¥¸ ì ‘ê·¼
    - í–‰ë™ì— ì´ˆì . ì±…ì„ ê²°ì • í›„ ìƒíƒœ ê²°ì •
    - "ì´ ê°ì²´ê°€ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì±…ì„ì€ ë¬´ì—‡ì¸ê°€" â†’ "ì´ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ë°ì´í„°ëŠ” ë¬´ì—‡ì¸ê°€â€

### í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ ì±…ì„ì„ ê²°ì •í•˜ë¼

**ì±…ì„ì€ ê°ì²´ì˜ ì…ì¥ì´ ì•„ë‹ˆë¼ ê°ì²´ê°€ ì°¸ì—¬í•˜ëŠ” í˜‘ë ¥ì— ì í•©í•´ì•¼ í•œë‹¤.**

- ì±…ì„ì€ ê°ì²´ ìì‹ ì˜ ì…ì¥ì´ ì•„ë‹ˆë¼, í˜‘ë ¥í•˜ëŠ” ë¬¸ë§¥ì— ë§ì•„ì•¼ í•œë‹¤.
- ì±…ì„ì´ ì¡°ê¸ˆ ì–´ìƒ‰í•´ ë³´ì´ë”ë¼ë„ í˜‘ë ¥ì— ì í•©í•˜ë‹¤ë©´ ê·¸ ì±…ì„ì€ ì¢‹ì€ ê²ƒì´ë‹¤.

**ë©”ì‹œì§€ì˜ ì—­í• **

í˜‘ë ¥ì€ ë©”ì‹œì§€ ì „ì†¡ìì—ì„œ ì‹œì‘í•œë‹¤. ë”°ë¼ì„œ ì˜¬ë°”ë¥¸ ì±…ì„ì€ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ì— ë§ì•„ì•¼ í•œë‹¤.

- ì ˆì°¨: ë©”ì‹œì§€ê°€ ê°ì²´ë¥¼ ì„ íƒ
    - ë©”ì‹œì§€ë¥¼ ë¨¼ì € ê²°ì •í•œë‹¤ â†’ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ê°ì²´ê°€ ë’¤ë”°ë¼ ê²°ì •ëœë‹¤.

**ë©”ì‹œì§€ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ë¥¼ í‘œí˜„í•œë‹¤**

**ê°ì²´ë¥¼ ê²°ì •í•˜ê¸° ì „ì— ê°ì²´ê°€ ìˆ˜ì‹ í•  ë©”ì‹œì§€ë¥¼ ë¨¼ì € ê²°ì •í•œë‹¤**

â‡’ í´ë¼ì´ì–¸íŠ¸ëŠ” ë‹¨ì§€ ì„ì˜ì˜ ê°ì²´ê°€ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ê²ƒì´ë¼ëŠ” ì‚¬ì‹¤ì„ ë¯¿ê³  ìì‹ ì˜ ì˜ë„ë¥¼ í‘œí˜„í•œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ë¿ì´ë‹¤. ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê¸°ë¡œ ê²°ì •ëœ ê°ì²´ëŠ” ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  'ì±…ì„'ì„ í• ë‹¹ë°›ê²Œ ëœë‹¤.

ğŸ‘‰ ë©”ì‹œì§€ ì „ì†¡ìì˜ ê´€ì ì—ì„œ ë©”ì‹œì§€ ìˆ˜ì‹ ìê°€ ê¹”ë”í•˜ê²Œ ìº¡ìŠí™”ë˜ëŠ” ê²ƒ. ì´ë ‡ê²Œ í•˜ë©´ ê°ì²´ì˜ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì´ ìº¡ìŠí™”ë˜ê³ , ì‘ì§‘ë„ê°€ ë†’ê³  ê²°í•©ë„ê°€ ë‚®ì€ ì„¤ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

**ì •ë¦¬**

- ê°ì²´ì—ê²Œ ì ì ˆí•œ ì±…ì„ì„ í• ë‹¹í•˜ê¸° ìœ„í•´ì„œëŠ” í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.
- í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ì—ì„œ ì ì ˆí•œ ì±…ì„ì´ë€ ê³§ í´ë¼ì´ì–¸íŠ¸ì˜ ê´€ì ì—ì„œ ì ì ˆí•œ ì±…ì„ì„ ì˜ë¯¸í•œë‹¤.
- ì˜¬ë°”ë¥¸ ê°ì²´ì§€í–¥ ì„¤ê³„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì „ì†¡í•  ë©”ì‹œì§€ë¥¼ ê²°ì •í•œ í›„ì—ì•¼ ë¹„ë¡œì†Œ ê°ì²´ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë° í•„ìš”í•œ ë‚´ë¶€ ë°ì´í„°ì— ê´€í•´ ê³ ë¯¼í•˜ê¸° ì‹œì‘í•œë‹¤.

### ì±…ì„ ì£¼ë„ ì„¤ê³„

3ì¥ì—ì„œ ì„¤ëª…í•œ ì±…ì„ ì£¼ë„ ì„¤ê³„ì˜ íë¦„

1. ì‹œìŠ¤í…œì´ ì‚¬ìš©ìì—ê²Œ ì œê³µí•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì¸ ì‹œìŠ¤í…œ ì±…ì„ì„ íŒŒì•…í•œë‹¤.
2. ì‹œìŠ¤í…œ ì±…ì„ì„ ë” ì‘ì€ ì±…ì„ìœ¼ë¡œ ë¶„í• í•œë‹¤.
3. ë¶„í• ëœ ì±…ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì ì ˆí•œ ê°ì²´ ë˜ëŠ” ì—­í• ì„ ì°¾ì•„ ì±…ì„ì„ í• ë‹¹í•œë‹¤.
4. ê°ì²´ê°€ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë„ì¤‘ ë‹¤ë¥¸ ê°ì²´ì˜ ë„ì›€ì´ í•„ìš”í•œ ê²½ìš° ì´ë¥¼ ì±…ì„ì§ˆ ì ì ˆí•œ ê°ì²´ ë˜ëŠ” ì—­í• ì„ ì°¾ëŠ”ë‹¤.
5. í•´ë‹¹ ê°ì²´ ë˜ëŠ” ì—­í• ì—ê²Œ ì±…ì„ì„ í• ë‹¹í•¨ìœ¼ë¡œì¨ ë‘ ê°ì²´ê°€ í˜‘ë ¥í•˜ê²Œ í•œë‹¤.

**ì±…ì„ ê²°ì • â†’ ê°ì²´ ê²°ì •**

- ì±…ì„ì´ ì •ë¦¬ë˜ê¸° ì „ê¹Œì§€ëŠ” ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœì— ëŒ€í•´ ê´€ì‹¬ì„ ê°€ì§€ì§€ ì•ŠëŠ”ë‹¤.

## ì±…ì„ í• ë‹¹ì„ ìœ„í•œ GRASP íŒ¨í„´

**GRASP**

- ì—¬ëŸ¬ ì±…ì„ í• ë‹¹ ê¸°ë²• ì¤‘ ê°€ì¥ ë„ë¦¬ ì•Œë ¤ì§„ ê¸°ë²•
- í¬ë ˆì´ê·¸ ë¼ë§Œ(Craig Larman)ì´ ì œì•ˆ
- GRASP = *General Responsibility Assignment Software Pattern.* ì¼ë°˜ì ì¸ ì±…ì„ í• ë‹¹ì„ ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í„´
- ê°ì²´ì—ê²Œ ì±…ì„ì„ í• ë‹¹í•  ë•Œ ì§€ì¹¨ìœ¼ë¡œ ì‚¼ì„ ìˆ˜ ìˆëŠ” ì›ì¹™ë“¤ì˜ ì§‘í•©ì„ íŒ¨í„´ í˜•ì‹ìœ¼ë¡œ ì •ë¦¬í•œ ê²ƒ

### ë„ë©”ì¸ ê°œë…ì—ì„œ ì¶œë°œí•˜ê¸°

**ì„¤ê³„ë¥¼ ì‹œì‘í•˜ê¸° ì „, ë„ë©”ì¸ì˜ ê°œëµì  ëª¨ìŠµì„ ê·¸ë ¤ë³´ëŠ” ê²ƒì´ ìœ ìš©í•˜ë‹¤.**

- ë„ë©”ì¸ ê°œë…ì€ ì±…ì„ í• ë‹¹ì˜ ì¤‘ìš”í•œ í›„ë³´ê°€ ë˜ë©°, ì½”ë“œì— ë„ë©”ì¸ì˜ ëª¨ìŠµì„ íˆ¬ì˜í•˜ê¸° ì‰½ê²Œ ë§Œë“ ë‹¤.
- ì´ ë‹¨ê³„ì—ì„œëŠ” ì •í™•í•˜ê³  ì™„ë²½í•  í•„ìš”ëŠ” ì—†ë‹¤. ì¶œë°œì ìœ¼ë¡œì„œ ì¶©ë¶„í•˜ë‹¤.
- ì¤‘ìš”í•œ ê²ƒì€ ì„¤ê³„ë¥¼ ì‹œì‘í•˜ëŠ” ê²ƒì´ì§€ ë„ë©”ì¸ ê°œë…ë“¤ì„ ì™„ë²½í•˜ê²Œ ì •ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.

```mermaid
classDiagram
direction LR
		ì˜ˆë§¤ -- "1" ìƒì˜
    ìƒì˜-- "1" ì˜í™”
    ì˜í™”"1" -- "1..*" í• ì¸ì¡°ê±´

		ê¸ˆì•¡í• ì¸ì˜í™” --|> ì˜í™”
    ë¹„ìœ¨í• ì¸ì˜í™” --|> ì˜í™”
    
    í• ì¸ì¡°ê±´ <|-- ìˆœë²ˆì¡°ê±´
    í• ì¸ì¡°ê±´ <|-- ê¸°ê°„ì¡°ê±´

```

- í•˜ë‚˜ì˜ ì˜í™”ëŠ” ì—¬ëŸ¬ ë²ˆ ìƒì˜ë  ìˆ˜ ìˆë‹¤.
- í•˜ë‚˜ì˜ ìƒì˜ì€ ì—¬ëŸ¬ ë²ˆ ì˜ˆì•½ë  ìˆ˜ ìˆë‹¤.
- ì˜í™”ëŠ” ë‹¤ìˆ˜ì˜ í• ì¸ ì¡°ê±´ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° í• ì¸ ì¡°ê±´ì—ëŠ” ìˆœë²ˆ ì¡°ê±´ê³¼ ê¸°ê°„ ì¡°ê±´ì´ ì¡´ì¬í•œë‹¤.
- í• ì¸ ì¡°ê±´ì€ ìˆœë²ˆ ì¡°ê±´ê³¼ ê¸°ê°„ ì¡°ê±´ìœ¼ë¡œ ë¶„ë¥˜ë˜ê³  ì˜í™”ëŠ” ê¸ˆì•¡ì´ ë‚˜ ë¹„ìœ¨ì— ë”°ë¼ í• ì¸ë  ìˆ˜ ìˆì§€ë§Œ ë™ì‹œì— ë‘ ê°€ì§€ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ì—†ë‹¤.

**ì°¸ê³ : ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ëª¨ë¸ì´ë€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤**

2ì¥ ë„ë©”ì¸: í• ì¸ ì •ì±…ì´ë¼ëŠ” ê°œë…ì´ í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ ê°œë…ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŒ

í˜„ì¬:  ì˜í™”ì˜ ì¢…ë¥˜ë¡œ í‘œí˜„

ì–´ë–¤ ìª½ì´ ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ëª¨ë¸ì¸ê°€? 

â†’ ë§Œì•½ ë‘ ë„ë©”ì¸ ëª¨ë¸ ëª¨ë‘ ì˜¬ë°”ë¥¸ êµ¬í˜„ì„ ì´ëŒì–´ë‚¼ ìˆ˜ë§Œ ìˆë‹¤ë©´ ì •ë‹µì€ 'ë‘˜ ë‹¤'ë‹¤.

ë„ë©”ì¸ ëª¨ë¸ì€ êµ¬í˜„ì˜ ê¸°ë°˜ì´ ë˜ì–´ì•¼ í•œë‹¤. = êµ¬í˜„ì„ ì—¼ë‘ì— ë‘ê³  êµ¬ì¡°í™”ë˜ëŠ” ê²ƒì´ ë°”ëŒì§í•˜ë‹¤.

ë°˜ëŒ€ë¡œ, ì‹¤ì œ ì½”ë“œ êµ¬ì¡°ì™€ êµ¬í˜„ ê²½í—˜ì´ ë„ë©”ì¸ì„ ë°”ë¼ë³´ëŠ” ê´€ì (ëª¨ë¸ì˜ êµ¬ì¡°)ì— ì˜í–¥ì„ ì£¼ê¸°ë„ í•œë‹¤.

í•„ìš”í•œ ê²ƒì€ êµ¬í˜„ì— ë„ì›€ì´ ë˜ê³ , ìœ ì—°ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ ë’·ë°›ì¹¨í•˜ëŠ” ì‹¤ìš©ì ì´ê³  ìœ ìš©í•œ ëª¨ë¸ì´ ì¢‹ì€ ëª¨ë¸ì´ë‹¤.

### ì •ë³´ ì „ë¬¸ê°€ì—ê²Œ ì±…ì„ì„ í• ë‹¹í•˜ë¼

**ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ì‹**

1. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œê³µí•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì±…ì„ìœ¼ë¡œ ìƒê°í•œë‹¤.
    - ì´ ì±…ì„ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•´ ì „ì†¡ëœ ë©”ì‹œì§€ë¡œ ê°„ì£¼í•˜ê³  ì´ ë©”ì‹œì§€ë¥¼ ì±…ì„ì§ˆ ì²« ë²ˆì§¸ ê°ì²´ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ê³„ë¥¼ ì‹œì‘í•œë‹¤. (ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì€ ì˜í™”ë¥¼ ì˜ˆë§¤í•  ì±…ì„ì´ ìˆë‹¤.)
    - ë©”ì‹œì§€ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ê°ì²´ê°€ ì•„ë‹ˆë¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ê°ì²´ì˜ ì˜ë„ë¥¼ ë°˜ì˜í•´ì„œ ê²°ì •í•´ì•¼ í•œë‹¤.
        - ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ê°ì²´ëŠ” ë¬´ì—‡ì„ ì›í•˜ëŠ”ê°€? â†’ ì˜í™” ì˜ˆë§¤(ë©”ì‹œì§€ = ì˜ˆë§¤í•˜ë¼)
2. ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ì í•©í•œ ê°ì²´ëŠ” ëˆ„êµ¬ì¸ê°€?
    - ê°ì²´ = ìƒíƒœì™€ í–‰ë™ì„ í†µí•©í•œ ìº¡ìŠí™”ì˜ ë‹¨ìœ„ = ìì‹ ì˜ ìƒíƒœë¥¼ ìŠ¤ìŠ¤ë¡œ ì²˜ë¦¬í•˜ëŠ” ììœ¨ì ì¸ ì¡´ì¬.
    - ì›ì¹™: ì±…ì„ì€ ì •ë³´ë¥¼ ê°€ì¥ ì˜ ì•„ëŠ” ê°ì²´(ì •ë³´ ì „ë¬¸ê°€)ì—ê²Œ í• ë‹¹í•œë‹¤.
        - ì˜ˆë§¤ì— í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì¥ ë§ì´ ê°€ì§„ ê°ì²´ = Screening(ìƒì˜)
        - GRASPì—ì„œëŠ” ì´ë¥¼ INFORMATION EXPERT(ì •ë³´ ì „ë¬¸ê°€) íŒ¨í„´ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

**ì°¸ê³ : INFORMATION EXPERT íŒ¨í„´** 

- ì±…ì„ì„ ê°ì²´ì— í• ë‹¹í•˜ëŠ” ì¼ë°˜ì ì¸ ì›ë¦¬
    - ê°ì²´ë€ ìƒíƒœì™€ í–‰ë™ì„ í•¨ê»˜ ê°€ì§€ëŠ” ë‹¨ìœ„ë¼ëŠ” ê°ì²´ì§€í–¥ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ì›ë¦¬ë¥¼ ì±…ì„ í• ë‹¹ì˜ ê´€ì ì—ì„œ í‘œí˜„
    - ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ì—ê²Œ í• ë‹¹í•˜ë¼.
- ì •ë³´ë¥¼ ì•Œê³  ìˆëŠ” ê°ì²´ë§Œì´ ì±…ì„ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í• ì§€ ìŠ¤ìŠ¤ë¡œ ê²°ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— INFORMATION EXPERT íŒ¨í„´ì„ ë”°ë¥´ë©´ ì •ë³´ì™€ í–‰ë™ì„ ìµœëŒ€í•œ ê°€ê¹Œìš´ ê³³ì— ìœ„ì¹˜ì‹œí‚¤ê¸° ë•Œë¬¸ì— ìº¡ìŠí™”ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
- ì •ë³´ â‰  ë°ì´í„°
    - ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ê°€ ì •ë³´ë¥¼ 'ì•Œê³ ' ìˆë‹¤ê³  í•´ì„œ ê·¸ ì •ë³´ë¥¼ 'ì €ì¥'í•˜ê³  ìˆì„ í•„ìš”ëŠ” ì—†ë‹¤.
    - ê°ì²´ëŠ” í•´ë‹¹ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ê°ì²´ë¥¼ ì•Œê³  ìˆê±°ë‚˜ í•„ìš”í•œ ì •ë³´ë¥¼ ê³„ì‚°í•´ì„œ ì œê³µí•  ìˆ˜ë„ ìˆë‹¤.
    - ì–´ë–¤ ë°©ì‹ì´ê±´ ì •ë³´ ì „ë¬¸ê°€ê°€ ë°ì´í„°ë¥¼ ë°˜ë“œì‹œ ì €ì¥í•˜ê³  ìˆì„ í•„ìš”ëŠ” ì—†ë‹¤.
- INFORMATION EXPERT íŒ¨í„´ì„ ë”°ë¥´ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ììœ¨ì„±ì´ ë†’ì€ ê°ì²´ë“¤ë¡œ êµ¬ì„±ëœ í˜‘ë ¥ ê³µë™ì²´ë¥¼ êµ¬ì¶•í•  ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§„ë‹¤.

**ì˜ˆë§¤ ì‹œìŠ¤í…œ(INFORMATION EXPERT íŒ¨í„´)**

1. ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì˜ ì²« ì±…ì„: **â€œì˜í™”ë¥¼ ì˜ˆë§¤í•˜ë¼â€**
- ì˜ˆë§¤ì— í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì¥ ë§ì´ ê°€ì§„ ê°ì²´ = Screening(ìƒì˜ ì‹œê°„, ìƒì˜ ìˆœë²ˆ ë“±)
    
    ```mermaid
    flowchart LR
        A["customer"] --->|1: ì˜ˆë§¤í•˜ë¼| B[":Screening"]
      
    
    ```
    

1. ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì˜ ë‘ ë²ˆì§¸ ì±…ì„: **â€œê°€ê²©ì„ ê³„ì‚°í•˜ë¼â€**
- Screeningì€ ê°€ê²© ê³„ì‚°ì„ ì§ì ‘ í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì™¸ë¶€ ê°ì²´ì— ìš”ì²­í•´ì•¼ í•œë‹¤.
- ê°€ê²© ê³„ì‚° ì „ë¬¸ê°€ = Movie(ì˜í™”)
    
    ```mermaid
    flowchart LR
        A["customer"] --->|1: ì˜ˆë§¤í•˜ë¼| B[":Screening"]
    	  B --->|2: ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
    
    ```
    

1. ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì˜ ì„¸ ë²ˆì§¸ ì±…ì„: **â€œí• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼â€**
- MovieëŠ” ê°€ê²©ì„ ê³„ì‚°í•˜ê¸° ìœ„í•´ í• ì¸ ì—¬ë¶€ í™•ì¸ì´ í•„ìš”í•˜ë‹¤.
- í• ì¸ ì—¬ë¶€ ì „ë¬¸ê°€ = DiscountCondition(í• ì¸ ì¡°ê±´)
    
    ```mermaid
    flowchart LR
        A["customer"] --->|1: ì˜ˆë§¤í•˜ë¼| B[":Screening"]
    	  B --->|2: ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
    	  C --->|3: í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼| D[":Discount Condition"]
    
    ```
    

### ë†’ì€ ì‘ì§‘ë„ì™€ ë‚®ì€ ê²°í•©ë„

**ì„¤ê³„ëŠ” íŠ¸ë ˆì´ë“œì˜¤í”„ í™œë™**

- ë™ì¼í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ì„¤ê³„ ëŒ€ì•ˆì€ ë¬´ìˆ˜íˆ ë§ë‹¤.
- ëª‡ ê°€ì§€ ì„¤ê³„ ì¤‘ì—ì„œ í•œ ê°€ì§€ë¥¼ ì„ íƒí•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.
- â“ ë§Œì•½Movie ëŒ€ì‹  Screeningì´ ì§ì ‘ DiscountConditionê³¼ í˜‘ë ¥í•œë‹¤ë©´â“
    - Screeningì´DiscountConditionì—ê²Œ í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡
    - ë°˜í™˜ ë°›ì€ í• ì¸ ì—¬ë¶€ë¥¼ Movieì— ì „ì†¡í•˜ëŠ” ë©”ì‹œì§€ì˜ ì¸ìë¡œ ì „ë‹¬í•˜ë„ë¡ ìˆ˜ì •
    - MovieëŠ” ì „ë‹¬ëœ í• ì¸ ì—¬ë¶€ ê°’ì„ ì´ìš©í•´ì„œ í• ì¸ ìš”ê¸ˆì„ ê³„ì‚°
    - ê¸°ëŠ¥ì ìœ¼ë¡œ ë³´ë©´ ì•ì˜ ì„¤ê³„ì™€ ë™ì¼í•˜ë‹¤.
- â“ ì™œ ìš°ë¦¬ëŠ” Movieê°€ DiscountConditionê³¼ í˜‘ë ¥í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí–ˆì„ê¹Œâ“
    
    â†’ ì‘ì§‘ë„ì™€ ê²°í•©ë„
    

**LOW COUPLING (ë‚®ì€ ê²°í•©ë„)**

ì˜ì¡´ì„±ì„ ì¤„ì´ê³  ë³€í™”ì˜ ì˜í–¥ì„ ìµœì†Œí™”í•˜ë©° ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ëŠ” ë°©í–¥ìœ¼ë¡œ ì±…ì„ì„ í• ë‹¹

- ê°€ëŠ¥í•œ ê²°í•©ë„ë¥¼ ì¶”ê°€í•˜ì§€ ì•Šê³  ê¸°ì¡´ ê´€ê³„ë¥¼ í™œìš©í•˜ëŠ” ì„¤ê³„ê°€ ë” ë‚«ë‹¤
- ì˜ˆì‹œ
    - `Movie` / `DiscountCondition`
        - ì´ë¯¸ ë„ë©”ì¸ìƒìœ¼ë¡œ `Movie`ê°€ `DiscountCondition` ëª©ë¡ì„ ê°€ì§€ê³  ìˆìŒ
        - ìƒˆë¡œìš´ ê²°í•©ë„ ì¶”ê°€ ì—†ìŒ
    - `Screening` / `DiscountCondition`
        - ìƒˆë¡œìš´ ê²°í•©ë„ê°€ ìƒê¹€
        - ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì¦ê°€
- ê²°ë¡ : Movieê°€ DiscountConditionê³¼ í˜‘ë ¥í•˜ëŠ” í¸ì´ ë” ë‚®ì€ ê²°í•©ë„ ìœ ì§€ ê°€ëŠ¥

**HIGH COHESION (ë†’ì€ ì‘ì§‘ë„)**

ê°ì²´ê°€ ë§¡ì€ ì±…ì„ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ê³ , ë¶ˆí•„ìš”í•œ ì§€ì‹ì´ë‚˜ ì±…ì„ì„ ë– ì•ˆì§€ ì•Šê²Œ í•˜ëŠ” ê²ƒ

- ì˜ˆì‹œ
    - `Screening`ì˜ ì£¼ìš” ì±…ì„ = ì˜ˆë§¤ ìƒì„±
        - í• ì¸ ì—¬ë¶€ê¹Œì§€ ì•Œê²Œ ë˜ë©´, ë³€ê²½ ì´ìœ ê°€ ëŠ˜ì–´ë‚˜ê³  ì‘ì§‘ë„ê°€ ë‚®ì•„ì§„ë‹¤.
    - `Movie`ì˜ ì£¼ìš” ì±…ì„ = ìš”ê¸ˆ ê³„ì‚°
        - í• ì¸ ì¡°ê±´ íŒë‹¨ì€ ë³¸ë˜ ì±…ì„ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨ë¨
- LOW COHESION íŒ¨í„´ì˜ ê´€ì ì—ì„œ `Movie`ê°€ `DiscountCondition`ê³¼ í˜‘ë ¥í•˜ëŠ” ê²ƒì´ ì‘ì§‘ë„ ì¸¡ë©´ì—ì„œë„ ë” ì ì ˆí•˜ë‹¤

LOW COUPLING íŒ¨í„´ê³¼ HIGH COHESION íŒ¨í„´ì€ ì„¤ê³„ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì±…ì„ê³¼ í˜‘ë ¥ì˜ í’ˆì§ˆì„ ê²€í† í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ í‰ê°€ ê¸°ì¤€ì´ë‹¤. ì±…ì„ì„ í• ë‹¹í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë§¤ìˆœê°„ë§ˆë‹¤ LOW COUPLINGê³¼ HIGH COHESIONì˜ ê´€ì ì—ì„œ ì „ì²´ì ì¸ ì„¤ê³„ í’ˆì§ˆì„ ê²€í† í•˜ë©´ ë‹¨ìˆœí•˜ë©´ì„œë„ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê³  ìœ ì—°í•œ ì„¤ê³„ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

### ì°½ì¡°ìì—ê²Œ ê°ì²´ ìƒì„± ì±…ì„ì„ í• ë‹¹í•˜ë¼

**CREATOR íŒ¨í„´ (ìƒì„±ì)**

ê°ì²´ë¥¼ ìƒì„±í•  ì±…ì„ì„ ì–´ë–¤ ê°ì²´ì—ê²Œ í• ë‹¹í• ì§€ì— ëŒ€í•œ ì§€ì¹¨

- ê°ì²´ Aë¥¼ ìƒì„±í•  ì±…ì„ì€ Aì™€ ê°€ì¥ ê´€ë ¨ì´ ê¹Šê³  í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì§„ ê°ì²´ Bì—ê²Œ í• ë‹¹í•œë‹¤.
    - Bê°€ A ê°ì²´ë¥¼ í¬í•¨í•˜ê±°ë‚˜ ì°¸ì¡°í•œë‹¤.
    - Bê°€ A ê°ì²´ë¥¼ ê¸°ë¡í•œë‹¤.
    - Bê°€ A ê°ì²´ë¥¼ ê¸´ë°€í•˜ê²Œ ì‚¬ìš©í•œë‹¤.
    - Bê°€ A ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë° í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤(ì´ ê²½ìš° BëŠ” Aì— ëŒ€í•œ ì •ë³´ ì „ë¬¸ê°€ë‹¤)
- ì´ë¯¸ ê²°í•©ë¼ ìˆëŠ” ê°ì²´ì—ê²Œ ìƒì„± ì±…ì„ì„ í• ë‹¹í•˜ëŠ” ê²ƒì€ ì„¤ê³„ì˜ ì „ì²´ì ì¸ ê²°í•©ë„ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
- ì˜ˆì‹œ
    - `Screening`ì´ `Reservation`ì˜ Creator
        - Screeningì€ ì˜í™”, ìƒì˜ ì‹œê°„, ìˆœë²ˆ ë“± ì˜ˆë§¤ì— í•„ìš”í•œ ë°ì´í„° ì „ë¬¸ê°€
        - ì˜ˆë§¤ ìš”ê¸ˆ ê³„ì‚° ì‹œ `Movie`ë„ ì•Œê³  ìˆìŒ

```mermaid
flowchart LR
    A["customer"] --->|1: ì˜ˆë§¤í•˜ë¼| B[":Screening"]
	  B --->|2: ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
	  C --->|3: í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼| D[":Discount Condition"]
	  B --->|4: create| E[":Reservation"]

```

## êµ¬í˜„ì„ í†µí•œ ê²€ì¦

**Screening**

```java
public class Screening {
	private Movie movie;
	private int sequence;
	private LocalDateTime whenScreened;
	
	public Reservation reserve(Customer customer, int audienceCount) {
		return new Reservation(customer, this, calculateFee(audienceCount), audienceCount);
	}
	
	private Money calculateFee(int audienceCount) {
		return movie.calculateMovieFee(this).times(audienceCount);
	}
}
```

- ì±…ì„: ì˜ˆë§¤ ìš”ì²­ ì²˜ë¦¬ + `Reservation` ìƒì„± (ì˜ˆë§¤ ì •ë³´ ì „ë¬¸ê°€ & Creator)
    - ìƒì˜ ì‹œê°„(whenScreened)
    - ìƒì˜ ìˆœë²ˆ(sequence)
    - ì˜í™”(movie)
- í˜‘ë ¥ ë©”ì‹œì§€:
    - ì˜ˆë§¤í•˜ë¼: `reserve(Customer, audienceCount)`
    - ê°€ê²©ì„ ê³„ì‚°í•˜ë¼: `calculateFee(audienceCount)`â†’ `Movie.calculateMovieFee(Screening)` ì— ë©”ì‹œì§€ ì „ì†¡
    

> `Movie.calculateMovieFee(Screening)`
> 
> - ì´ ë©”ì‹œì§€ëŠ” ìˆ˜ì‹ ìì¸ Movieê°€ ì•„ë‹ˆë¼ ì†¡ì‹ ìì¸ Screeningì˜ ì˜ë„ë¥¼ í‘œí˜„í•œë‹¤.
> - Movieì˜ ë‚´ë¶€ êµ¬í˜„ì— ëŒ€í•œ ì–´ë–¤ ì§€ì‹ë„ ì—†ì´ ì „ì†¡í•  ë©”ì‹œì§€ë¥¼ ê²°ì •í–ˆë‹¤
> 
> ì´ì²˜ëŸ¼ Movieì˜ êµ¬í˜„ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  í•„ìš”í•œ ë©”ì‹œì§€ë¥¼ ê²°ì •í•˜ë©´ Movieì˜ ë‚´ë¶€ êµ¬í˜„ì„ ê¹”ë”í•˜ê²Œ ìº¡ìŠí™”í•  ìˆ˜ ìˆë‹¤.
> 

**Movie**

```java
public enum MovieType {
	AMOUNT_DISCOUNT,// ê¸ˆì•¡ í• ì¸ ì •ì±…
	PERCENT_DISCOUNT, // ë¹„ìœ¨ í• ì¸ ì •ì±…
	NONE_DISCOUNT // ë¯¸ì ìš©
}
```

```java
public class Movie {
	private String title;
	private Duration runningTime;
	private Money fee;
	private List<DiscountCondition> discountConditions;
	
	private MovieType movieType;
	private Money discountAmount;
	private double discountPercent;
	
	public Money calculateMovieFee(Screening screening) {
		if (isDiscountable(screening)) {
			return fee.minus(calculateDiscountAmount());
		}
		return fee;
	}
	
	// 1. í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨
	private boolean isDiscountable(Screening screening) {
		return discountConditions.stream()
						.anyMatch(condition -> condition.isSatisfiedBy(screening));
						// 2. DiscountCondition ë©”ì‹œì§€ ì „ì†¡
	}
	
	// 3. í• ì¸ ìš”ê¸ˆ ê³„ì‚°
	private Money calculateDiscountAmount() {
		switch(movieType) {
			case AMOUNT_DISCOUNT:
			return calculateAmountDiscountAmount();
		case PERCENT_DISCOUNT:
			return calculatePercentDiscountAmount();
		case NONE_DISCOUNT:
			return calculateNoneDiscountAmount();
		}
		throw new IllegalStateException();
	}
	
	private Money calculateAmountDiscountAmount() {
		return discountAmount;
	}
	
	private Money calculatePercentDiscountAmount() {
		return fee.times(discountPercent);
	}
	
	private Money calculateNoneDiscountAmount() {
		return Money.ZERO;
	}
}
```

- ì±…ì„: ì˜í™” ìš”ê¸ˆ ê³„ì‚°
- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜
    - ê¸°ë³¸ ê¸ˆì•¡ `fee`
    - í• ì¸ ì¡°ê±´ ëª©ë¡ `discountConditions`
    - í• ì¸ ì •ì±…(`MovieType`), í• ì¸ ê¸ˆì•¡(`discountAmount`), í• ì¸ ë¹„ìœ¨(`discountPercent`)
- í• ì¸ ì¡°ê±´ íŒë‹¨ì€ `DiscountCondition`ì—ê²Œ ìœ„ì„
- ì‹¤ì œ í• ì¸ ê³„ì‚°ì€ Movieê°€ ì±…ì„

**DiscountCondition** 

```java
public enum DiscountConditionType {
	SEQUENCE, // ìˆœë²ˆ ì¡°ê±´
	PERIOD // ê¸°ê°„ ì¡°ê±´
}
```

```java
public class DiscountCondition {
	private DiscountConditionType type;
	private int sequence;
	private DayOfWeek dayOfWeek;
	private LocalTime startTime;
	private LocalTime endTime;
	
	public boolean isSatisfiedBy(Screening screening) {
		// typeì˜ ê°’ì— ë”°ë¼ ì ì ˆí•œ ë©”ì„œë“œë¥¼ í˜¸ì¶œ
		if (type == DiscountConditionType.PERIOD) {
			return isSatisfiedByPeriod(screening);
		}
		return isSatisfiedBySequence(screening);
	}
	
	private boolean isSatisfiedByPeriod(Screening screening) {
		return dayOfWeek.equals(screening.getWhenScreened().getDayOfWeek()) &&
		startTime.compareTo(screening.getWhenScreened().toLocalTime()) <= 0 8&
		endTime.isAfter(screening.getWhenScreened().toLocalTime()) > 0;
	}
	
	private boolean isSatisfiedBySequence(Screening screening) {
		return sequence == screening.getSequence();
	}
}
```

- ì±…ì„: í• ì¸ ì—¬ë¶€ íŒë‹¨
- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜
    - ì¢…ë¥˜: `DiscountConditionType`
    - ìˆœë²ˆ ì¡°ê±´: `sequence`
    - ê¸°ê°„ ì¡°ê±´: `dayOfWeek`, `startTime`, `endTime`
- í• ì¸ ì¡°ê±´ì„ íŒë‹¨í•˜ê¸° ìœ„í•´ Screeningì˜ ìƒì˜ ì‹œê°„ê³¼ ìƒì˜ ìˆœë²ˆì„ ì•Œì•„ì•¼ í•œë‹¤
    
    ```java
    public class Screening {
    	public LocalDateTime getWhenScreened() {
    		return whenScreened;
    	}
    	
    	public int getSequence() {
    		return sequence;
    	}
    }
    ```
    

### DiscountCondition ê°œì„ í•˜ê¸°

**ë¬¸ì œì : ë³€ê²½ì— ì·¨ì•½í•œ í´ë˜ìŠ¤**

- `DiscountCondition`ì€ ì„œë¡œ ë‹¤ë¥¸ ì´ìœ ë¡œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.
    1. ìƒˆë¡œìš´ í• ì¸ ì¡°ê±´ ì¶”ê°€
        
        â†’ `isSatisfiedBy`ì˜ `if ~ else` ìˆ˜ì • ë° ìƒˆë¡œìš´ ì†ì„± ì¶”ê°€
        
    2. ìˆœë²ˆ ì¡°ê±´ ë¡œì§ ë³€ê²½
        
        â†’ `isSatisfiedBySequence` êµ¬í˜„ ë° `sequence` ì†ì„± ë³€ê²½
        
    3. ê¸°ê°„ ì¡°ê±´ ë¡œì§ ë³€ê²½
        
        â†’ `isSatisfiedByPeriod` êµ¬í˜„ ë° `dayOfWeek`, `startTime`, `endTime` ì†ì„± ë³€ê²½
        

**ë‚®ì€ ì‘ì§‘ë„ì˜ ì§•í›„**

1. ë³€ê²½ ì´ìœ ê°€ ì—¬ëŸ¬ ê°œ: `DiscountCondition`ì€ ìˆœë²ˆ ì¡°ê±´, ê¸°ê°„ ì¡°ê±´ ëª¨ë‘ ì±…ì„ì§„ë‹¤.
2. ì´ˆê¸°í™” ì‹œì ì´ ë‹¤ë¦„
    - ì‘ì§‘ë„ê°€ ë†’ì€ í´ë˜ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ëª¨ë“  ì†ì„±ì„ í•¨ê»˜ ì´ˆê¸°í™”í•œë‹¤
    - ìˆœë²ˆ ì¡°ê±´ì¼ ë•Œ: `sequence`ë§Œ ì´ˆê¸°í™”ë¨
    - ê¸°ê°„ ì¡°ê±´ì¼ ë•Œ: `dayOfWeek`, `startTime`, `endTime`ë§Œ ì´ˆê¸°í™”ë¨
3. ë©”ì„œë“œë“¤ì´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
    - ëª¨ë“  ë©”ì„œë“œê°€ ê°ì²´ì˜ ëª¨ë“  ì†ì„±ì„ ì‚¬ìš©í•œë‹¤ë©´ í´ë˜ìŠ¤ì˜ ì‘ì§‘ë„ëŠ” ë†’ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤
    - `isSatisfiedBySequence`: `sequence`ë§Œ ì‚¬ìš©
    - `isSatisfiedByPeriod`: `dayOfWeek`, `startTime`, `endTime`ë§Œ ì‚¬ìš©
        
        

í•´ê²°: ë³€ê²½ì˜ ì´ìœ ì— ë”°ë¼ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œë‹¤

### íƒ€ì… ë¶„ë¦¬í•˜ê¸°

`DiscountCondition` â†’ `SequenceCondition`, `PeriodCondition` 

```java
public class PeriodCondition {
	private DayOfWeek dayOfWeek;
	private LocalTime startTime;
	private LocalTime endTime;
	
	public PeriodCondition(DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime) {
		this.dayOfWeek = dayOfWeek;
		this.startTime = startTime;
		this.endTime = endTime;
	}
	
	public boolean isSatisfiedBy(Screening screening) {
		return dayOfWeek.equals(screening.getWhenScreened().getDayOfWeek()) 8&
					startTime.compareTo(screening.getWhenScreened().toLocalTime()) <= 0 &&
					endTime.compareTo(screening.getWhenScreened().toLocalTime() > 0);
	}
}
```

```java
public class SequenceCondition {
	private int sequence;
	
	public SequenceCondition(int sequence) {
		this.sequence = sequence;
	}
	
	public boolean isSatisfiedBy(Screening screening) {
		return sequence == screening.getSequence();
	}
}
```

- SequenceConditionê³¼ PeriodConditionì€ ìì‹ ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ í•¨ê»˜ ì´ˆê¸°í™”í•  ìˆ˜ ìˆë‹¤
- í´ë˜ìŠ¤ì— ìˆëŠ” ëª¨ë“  ë©”ì„œë“œëŠ” ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ê·¸ë£¹ì„ ì‚¬ìš©í•œë‹¤ â†’ ì‘ì§‘ë„ í–¥ìƒ.

í•˜ì§€ë§Œ ì•ˆíƒ€ê¹ê²Œë„ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œ í›„ì— ìƒˆë¡œìš´ ë¬¸ì œê°€ ë‚˜íƒ€ë‚¬ë‹¤. ìˆ˜ì • ì „ì—ëŠ” Movieì™€ í˜‘ë ¥í•˜ëŠ” í´
ë˜ìŠ¤ëŠ” DiscountCondition í•˜ë‚˜ë¿ì´ì—ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìˆ˜ì • í›„ì— Movieì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” SequenceConditionê³¼
PeriodConditionì´ë¼ëŠ” ë‘ ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ëª¨ë‘ì™€ í˜‘ë ¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

**ìƒˆë¡œìš´ ë¬¸ì œ: ê²°í•©ë„ ì¦ê°€**

```mermaid
flowchart LR
	  B[":Screening"] --->|ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
	  C --->|ê¸°ê°„ ì¡°ê±´ì„ ì´ìš©í•´ì„œ í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼| D[":Period Condition"]

```

```mermaid
flowchart LR
	  B[":Screening"] --->|ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
	  C --->|ìˆœë²ˆ ì¡°ê±´ì„ ì´ìš©í•´ì„œ í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼| D[":Sequence Condition"]

```

```java
public class Movie {
	private List<PeriodCondition> periodConditions;
	private List<SequenceCondition> sequenceConditions;
	
	private boolean isDiscountable(Screening screening) {
		return checkPeriodConditions(screening) || checkSequenceConditions(screening);
	}
	
	private boolean checkPeriodConditions(Screening screening) {
		return periodConditions.stream()
					.anyMatch(condition -> condition.isSatisfiedBy(screening));
	}
	
	private boolean checkSequenceConditions(Screening screening) {
		return sequenceConditions.stream()
					.anyMatch(condition -> condition.isSatisfiedBy(screening));
	}
}
```

- `Movie`ëŠ” ì´ì œ `SequenceCondition`, `PeriodCondition` ë‘ í´ë˜ìŠ¤ ëª¨ë‘ì— ì˜ì¡´í•´ì•¼ í•œë‹¤
- ìƒˆë¡œìš´ í• ì¸ ì¡°ê±´ì„ ì¶”ê°€í•˜ë ¤ë©´ Movieë„ ìˆ˜ì •í•´ì•¼ í•¨
    - `Movie`ì— í•´ë‹¹ ì¡°ê±´ìš© `List` ì¶”ê°€.
    - ì²´í¬ ë©”ì„œë“œ ì¶”ê°€.
    - `isDiscountable` ìˆ˜ì • í•„ìš”.

í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê¸° ì „ì—ëŠ” DiscountConditionì˜ ë‚´ë¶€ êµ¬í˜„ë§Œ ìˆ˜ì •í•˜ë©´ Movieì—ëŠ” ì•„ë¬´ëŸ° ì˜í–¥ë„ ë¯¸ì¹˜ì§€
ì•Šì•˜ì§€ë§Œ ìˆ˜ì • í›„ì—ëŠ” í• ì¸ ì¡°ê±´ì„ ì¶”ê°€í•˜ë ¤ë©´ Movieë„ í•¨ê»˜ ìˆ˜ì •í•´ì•¼ í•œë‹¤. 

DiscountConditionì˜ ì…ì¥ì—ì„œ ë³´ë©´ ì‘ì§‘ë„ê°€ ë†’ì•„ì¡Œì§€ë§Œ ë³€ê²½ê³¼ ìº¡ìŠí™”ë¼ëŠ” ê´€ì ì—ì„œ ë³´ë©´ ì „ì²´ì ìœ¼ë¡œ ì„¤ê³„ì˜ í’ˆì§ˆì´ ë‚˜ë¹ ì§„ ê²ƒ!

### ë‹¤í˜•ì„±ì„ ë™í•´ ë¶„ë¦¬í•˜ê¸°

`Movie` ì…ì¥ì—ì„œëŠ” `SequenceCondition`ê³¼ `PeriodCondition`ì€ ì•„ë¬´ ì°¨ì´ê°€ ì—†ë‹¤.

â†’ ë‘˜ ë‹¤ â€œí• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤â€ëŠ” ë™ì¼í•œ ì±…ì„ë§Œ ìˆ˜í–‰í•œë‹¤. í•˜ì§€ë§Œ í˜„ì¬ êµ¬ì¡°ì—ì„œëŠ” `Movie`ê°€ ë‘ í´ë˜ìŠ¤ì˜ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì•Œì•„ì•¼ í˜‘ë ¥í•  ìˆ˜ ìˆë‹¤.

**ğŸ‘‰ ì—­í•  ë“±ì¥**

```mermaid
flowchart LR
	  B[":Screening"] --->|ê°€ê²©ì„ ê³„ì‚°í•˜ë¼| C[":Movie"]
	  C --->|í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë¼| D[":Discount Condition"]

```

- ë‘ í´ë˜ìŠ¤ê°€ ê°™ì€ ì±…ì„ì„ ìˆ˜í–‰í•œë‹¤ë©´ ê³µí†µ ì—­í• ë¡œ ë¬¶ì„ ìˆ˜ ìˆë‹¤.
- ì—­í• ì˜ ê°œë…ì„ ì ìš©í•˜ë©´ Movieê°€ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ëŠ” ì•Œì§€ ëª»í•œ ì±„ ì˜¤ì§ ì—­í• ì— ëŒ€í•´ì„œë§Œ ê²°í•©ë˜ë„ë¡ ì˜ì¡´ì„±ì„ ì œí•œí•  ìˆ˜ ìˆë‹¤.
    - ì¶”ìƒ í´ë˜ìŠ¤: ì—­í• ì„ ëŒ€ì²´í•  í´ë˜ìŠ¤ë“¤ ì‚¬ì´ì—ì„œ êµ¬í˜„ì„ ê³µìœ í•´ì•¼ í•  í•„ìš”ê°€ ìˆì„ ë•Œ
    - ì¸í„°í˜ì´ìŠ¤: êµ¬í˜„ì„ ê³µìœ í•  í•„ìš” ì—†ì´ ì—­í• ì„ ëŒ€ì²´í•˜ëŠ” ê°ì²´ë“¤ì˜ ì±…ì„ë§Œ ì •ì˜í•˜ê³  ì‹¶ì„ ë•Œ

```java
public interface DiscountCondition {
	boolean isSatisfiedBy(Screening screening);
}

public class PeriodCondition implements DiscountCondition { ... }
public class SequenceCondition implements DiscountCondition { ... }
```

- ê° ì¡°ê±´ í´ë˜ìŠ¤ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë„ë¡ ë³€ê²½

```java
public class Movie {
	private List<DiscountCondition> discountConditions;
	
	public Money calculateMovieFee(Screening screening) {
		if (isDiscountable(screening)) {
			return fee.minus(calculateDiscountAmount());
		}
		return fee;
	}
	
	private boolean isDiscountable(Screening screening) {
		return discountConditions.stream().anyMatch(condition -> condition.isSatisfiedBy(screening));
	}
}
```

MovieëŠ” ë” ì´ìƒ SequenceCondition, PeriodConditionì˜ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì•Œ í•„ìš” ì—†ë‹¤. ì˜¤ì§ DiscountCondition ì—­í• ê³¼ isSatisfiedBy ë©”ì‹œì§€ì—ë§Œ ì˜ì¡´í•œë‹¤.

- `Movie` â†’ `condition.isSatisfiedBy(screening)` ë©”ì‹œì§€ë¥¼ ì „ì†¡
- ì‹¤ì œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œëŠ” ê°ì²´ì˜ êµ¬ì²´ íƒ€ì…ì— ë”°ë¼ ë‹¬ë¼ì§
    - `SequenceCondition` â†’ `SequenceCondition.isSatisfiedBy` ì‹¤í–‰
    - `PeriodCondition` â†’ `PeriodCondition.isSatisfiedBy` ì‹¤í–‰
- í˜‘ë ¥ì´ ë‹¤í˜•ì (polymorphic) ìœ¼ë¡œ ì´ë£¨ì–´ì§

```mermaid
classDiagram
direction LR
		class Screening{
			+ reserve()
		}
		class Movie{
			+ calculateMovieFee()
			- calcullateDiscountAmount()
		}
		class DiscountCondition{
			+ isSatisfiedBy()
		}
		class SequenceCondition{
			+ isSatisfiedBy()
		}
		class PeriodCondition{
			+ isSatisfiedBy()
		}
		
    Screening-->"movie" Movie
    Movie --> "DiscountCondition" DiscountCondition

		SequenceCondition..|> DiscountCondition
    PeriodCondition..|> DiscountCondition
   
		<<interface>> DiscountCondition

```

### ë³€ê²½ìœ¼ë¡œë¶€í„° ë³´í˜¸í•˜ê¸°

**PROTECTED VARIATIONS (ë³€ê²½ ë³´í˜¸) íŒ¨í„´**

ë³€ê²½ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ì€ ì§€ì ì„ ì•ˆì •ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ìº¡ìŠí™”

1. ë³€í™”ê°€ ì˜ˆìƒë˜ëŠ” í´ë˜ìŠ¤ë‚˜ ì„œë¸Œì‹œìŠ¤í…œì„ ì‹ë³„
2. ì•ˆì •ëœ ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤)ë¥¼ í†µí•´ ì™¸ë¶€ì— ê³µê°œ
3. ë³€í™”ê°€ ì¶”ìƒí™” ë’¤ë¡œ ìˆ¨ê²¨ì§€ë„ë¡ ì±…ì„ í• ë‹¹
- `DiscountCondition`
    - DiscountConditionì´ë¼ëŠ” ì—­í• ì´ Movieë¡œë¶€í„° PeriodConditionê³¼ SequenceConditionì˜ ì¡´ì¬ë¥¼ ê°ì¶˜ë‹¤
    - Movieì˜ ê´€ì ì—ì„œ ìƒˆë¡œìš´ DiscountCondition íƒ€ì…ì„ ì¶”ê°€í•˜ë”ë¼ë„ Movieê°€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤

**í´ë˜ìŠ¤ ë¶„ë¦¬ + ì¸í„°í˜ì´ìŠ¤ í™œìš© = ì‘ì§‘ë„ ì¦ê°€ + ê²°í•©ë„ ê°ì†Œ**

POLYMORPHISM íŒ¨í„´ â†’ íƒ€ì…ë³„ ë³€í™” ì±…ì„ ë¶„ì‚°

PROTECTED VARIATIONS íŒ¨í„´ â†’ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë³€ê²½ ìº¡ìŠí™”

ë‘ íŒ¨í„´ì„ ì¡°í•©í•˜ë©´:

- ê¸°ì¡´ ì½”ë“œëŠ” ìµœì†Œ ë³€ê²½
- ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ìœ ì—°
- ë³€ê²½ìœ¼ë¡œ ì¸í•œ ì‹œìŠ¤í…œ ë¶ˆì•ˆì •ì„± ê°ì†Œ

### Movie í´ë˜ìŠ¤ ê°œì„ í•˜ê¸°

ê¸°ì¡´ `Movie` í´ë˜ìŠ¤ëŠ” ê¸ˆì•¡ í• ì¸ ì •ì±…ê³¼ ë¹„ìœ¨ í• ì¸ ì •ì±…ì„ í•œ í´ë˜ìŠ¤ ì•ˆì—ì„œ ì²˜ë¦¬í•œë‹¤.

- í•˜ë‚˜ ì´ìƒì˜ ì´ìœ ë¡œ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ì¡´ì¬ â†’ ì‘ì§‘ë„ ë‚®ìŒ
- ìƒˆ ì •ì±… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • í•„ìš” â†’ ê²°í•©ë„ ë†’ìŒ

**í•´ê²° ë°©ë²•: ì—­í• ê³¼ ë‹¤í˜•ì„± ì ìš©, POLYMORPHISM íŒ¨í„´**

1. Movie ì—­í•  ì¶”ìƒí™”
    - `Movie` ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³ , ê¸ˆì•¡/ë¹„ìœ¨/ì—†ìŒ í• ì¸ ì •ì±…ì„ ì„œë¸Œí´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
    - `calculateDiscountAmount()` ë©”ì„œë“œë¥¼ ì¶”ìƒ ë©”ì„œë“œë¡œ ì„ ì–¸ â†’ ì„œë¸Œí´ë˜ìŠ¤ê°€ ê°ìì˜ ê³„ì‚° ë°©ì‹ êµ¬í˜„
2. ì„œë¸Œí´ë˜ìŠ¤
    - AmountDiscountMovie: ê¸ˆì•¡ í• ì¸ ì •ì±…
    - PercentDiscountMovie: ë¹„ìœ¨ í• ì¸ ì •ì±…
    - NoneDiscountMovie: í• ì¸ ì—†ìŒ
3. ë‹¤í˜•ì„± í™œìš©
    - `Screening`ê³¼ `Movie`ëŠ” ë©”ì‹œì§€ë¥¼ í†µí•´ ë‹¤í˜•ì ìœ¼ë¡œ í˜‘ë ¥
    - Movieì˜ êµ¬ì²´ íƒ€ì…ì´ ë°”ë€Œì–´ë„ Screeningì— ì˜í–¥ ì—†ìŒ â†’ PROTECTED VARIATIONS íŒ¨í„´ ì ìš©

```java
public abstract class Movie {
	private String title;
	private Duration runningTime;
	private Money fee;
	private List<DiscountCondition> discountConditions;
	
	public Movie(String title, Duration runningTime, Money fee, DiscountCondition ... discountConditions) {
		this.title = title;
		this.runningTime = runningTime;
		this.fee = fee;
		this.discountConditions = Arrays.asList(discountConditions);
	}
	
	public Money calculateMovieFee(Screening screening) {
		if (isDiscountable(screening)) {
			return fee.minus(calculateDiscountAmount());
		}
		return fee;
	}
	
	private boolean isDiscountable(Screening screening) {
		return discountConditions.stream().anyMatch(condition -> condition.isSatisfiedBy(screening));
	}
	
	abstract protected Money calculateDiscountAmount();
}
```

- discountAmount, discountPercentì™€ ì´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì‚­ì œ
- calculateDiscountAmount ë©”ì„œë“œë¥¼ ì¶”ìƒ ë©”ì„œë“œë¡œ ì„ ì–¸
- ì„œë¸Œí´ë˜ìŠ¤ë“¤ Movieë¥¼ ìƒì†

```java
public class AmountDiscountMovie extends Movie {
	private Money discountAmount;

	public AmountDiscountMovie(String title, Duration runningTime,
			Money fee, Money discountAmount, DiscountCondition ... discountConditions) {
		super(title, runningTime, fee, discountConditions);
		this.discountAmount = discountAmount;
	}
	
	@0verride
	protected Money calculateDiscountAmount() {
		return discountAmount;
	}
}
```

```java
public class PercentDiscountMovie extends Movie {
	private double percent;
	
	public PercentDiscountMovie(String title, Duration runningTime,
			Money fee, double percent, DiscountCondition ... discountConditions) {
		super(title, runningTime, fee, discountConditions);
		this.percent = percent;
	}
	
	@Override
	protected Money calculateDiscountAmount() {
		return getFee().times(percent);
	}
}
```

```java
public class NoneDiscountMovie extends Movie {
	public NoneDiscountMovie(String title, Duration runningTime, Money fee) {
		super(title, runningTime, fee);
	}
	
	@0verride
	protected Money calculateDiscountAmount() {
		return Money.ZERO;
	}
}
```

í• ì¸ ìš”ê¸ˆì„ ê³„ì‚°í•˜ê¸° ìœ„í•´ ì˜í™”ì˜ ê¸°ë³¸ ê¸ˆì•¡ì´ í•„ìš”í•˜ë‹¤. 

Movieì—ì„œ ê¸ˆì•¡ì„ ë°˜í™˜í•˜ëŠ” getFee ë©”ì„œë“œëŠ” ì„œë¸Œí´ë˜ìŠ¤ì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ protectedë¡œ ì œí•œí•œë‹¤.

```java
public abstract class Movie {
	protected Money getFee() {
		return fee;
	}
}
```

```mermaid
classDiagram
direction BT
		class Screening{
			+ reserve()
		}
		class Movie{
			+ calculateMovieFee()
			# calculateDiscountAmount()
		}
		class AmountDiscountMovie{
			# calculateDiscountAmount()
		}
		class PercentDiscountMovie{
			# calculateDiscountAmount()
		}
		class NoneDiscountMovie{
			# calculateDiscountAmount()
		}
		class DiscountCondition{
			+ isSatisfiedBy()
		}
		class SequenceCondition{
			+ isSatisfiedBy()
		}
		class PeriodCondition{
			+ isSatisfiedBy()
		}
		
    Screening-->"movie" Movie
    Movie --> "DiscountCondition" DiscountCondition

		AmountDiscountMovie--|> Movie 
    PercentDiscountMovie--|> Movie 
    NoneDiscountMovie--|> Movie 

		SequenceCondition..|> DiscountCondition
    PeriodCondition..|> DiscountCondition
   
		<<interface>> DiscountCondition

```

- ëª¨ë“  í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì€ ìº¡ìŠí™”
- ëª¨ë“  í´ë˜ìŠ¤ëŠ” ë³€ê²½ì˜ ì´ìœ ë¥¼ ì˜¤ì§ í•˜ë‚˜ì”©ë§Œ ê°€ì§„ë‹¤
- í´ë˜ìŠ¤ëŠ” ì‘ê³  ì˜¤ì§ í•œ ê°€ì§€ ì¼ë§Œ ìˆ˜í–‰í•œë‹¤

### ë³€ê²½ê³¼ ìœ ì—°ì„±

ì„¤ê³„ë¥¼ ì£¼ë„í•˜ëŠ” ê²ƒì€ ë³€ê²½ì´ë‹¤. 

ë³€ê²½ì— ëŒ€ë¹„í•  ìˆ˜ ìˆëŠ” ë‘ ê°€ì§€ ë°©ë²•

1. í•˜ë‚˜ëŠ” ì½”ë“œë¥¼ ì´í•´í•˜ê³  ìˆ˜ì •í•˜ê¸° ì‰½ë„ë¡ ìµœëŒ€í•œ ë‹¨ìˆœí•˜ê²Œ ì„¤ê³„í•˜ëŠ” ê²ƒ 
2. ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ë³€ê²½ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ë” ìœ ì—°í•˜ê²Œ ë§Œë“œëŠ” ê²ƒ 

ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ì „ìê°€ ë” ì¢‹ì€ ë°©ë²•ì´ì§€ë§Œ ìœ ì‚¬í•œ ë³€ê²½ì´ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•˜ê³  ìˆë‹¤ë©´ ë³µì¡ì„±ì´ ìƒìŠ¹í•˜ë”ë¼ë„ ìœ ì—°ì„±ì„ ì¶”ê°€í•˜ëŠ” ë‘ ë²ˆì§¸ ë°©ë²•ì´ ë” ì¢‹ë‹¤.

**ì˜ˆì‹œ: ì˜í™”ì— ì„¤ì •ëœ í• ì¸ ì •ì±…ì„ ì‹¤í–‰ ì¤‘ì— ë³€ê²½í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì´ ì¶”ê°€ëë‹¤.**

ê¸°ì¡´ ì„¤ê³„: `Movie` â†’ `AmountDiscountMovie`, `PercentDiscountMovie`, `NoneDiscountMovie` ìƒì† êµ¬ì¡°

- ì‹¤í–‰ ì¤‘ì— ì˜í™”ì˜ í• ì¸ ì •ì±…ì„ ë°”ê¾¸ê³  ì‹¶ìœ¼ë©´ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.
- ìƒíƒœ ë³µì‚¬, ì‹ë³„ì ê´€ë¦¬ ë“± ë²ˆê±°ë¡œìš´ ì‘ì—… í•„ìš” â†’ ì˜¤ë¥˜ ê°€ëŠ¥ì„± ì¦ê°€

ì´ ê²½ìš° ì½”ë“œì˜ ë³µì¡ì„±ì´ ë†’ì•„ì§€ë”ë¼ë„ í• ì¸ ì •ì±…ì˜ ë³€ê²½ì„ ì‰½ê²Œ ìˆ˜ìš©í•  ìˆ˜ ìˆê²Œ ì½”ë“œë¥¼ ìœ ì—°í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ë” ì¢‹ì€ ë°©ë²•ì´ë‹¤.

**í•´ê²° ë°©ë²•: ìƒì† ëŒ€ì‹  í•©ì„±ì„ ì‚¬ìš©í•œë‹¤.** 

Movieì˜ ìƒì† ê³„ì¸µ ì•ˆì— êµ¬í˜„ëœ í• ì¸ ì •ì±…ì„ ë…ë¦½ì ì¸ DiscountPolicyë¡œ ë¶„ë¦¬í•œ í›„ Movieì— í•©ì„±ì‹œí‚¨ë‹¤.

```mermaid
classDiagram
direction BT
		class Screening{
			+ reserve()
		}
		class Movie{
			+ calculateMovieFee()
		}
		class DiscountPolicy{
			+ calculateDiscountAmount()
			# getDiscountAmount()
		}
		class AmountDiscountMovie{
			# getDiscountAmount()
		}
		class PercentDiscountMovie{
			# getDiscountAmount()
		}
		class NoneDiscountMovie{
			# getDiscountAmount()
		}
		class DiscountCondition{
			+ isSatisfiedBy()
		}
		class SequenceCondition{
			+ isSatisfiedBy()
		}
		class PeriodCondition{
			+ isSatisfiedBy()
		}
		
    Screening-->"movie" Movie
    Movie --> "DiscountPolicy" DiscountPolicy
    DiscountPolicy--> "conditions" DiscountCondition

		AmountDiscountMovie--|> DiscountPolicy
    PercentDiscountMovie--|> DiscountPolicy
    NoneDiscountMovie--|> DiscountPolicy

		SequenceCondition..|> DiscountCondition
    PeriodCondition..|> DiscountCondition
   
		<<interface>> DiscountCondition

```

- **DiscountPolicy**ë¼ëŠ” ë…ë¦½ì ì¸ í´ë˜ìŠ¤ ê³„ì¸µìœ¼ë¡œ í• ì¸ ì •ì±… ë¶„ë¦¬
    - AmountDiscountPolicy
    - PercentDiscountPolicy
    - NoneDiscountPolicy
- `Movie`ëŠ” ìƒì† ëŒ€ì‹  DiscountPolicyë¥¼ **í•„ë“œë¡œ í¬í•¨**
    
    â†’ Movie ì¸ìŠ¤í„´ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , í• ì¸ ì •ì±…ë§Œ êµì²´ ê°€ëŠ¥
    
- í• ì¸ ì •ì±… ë³€ê²½ ì˜ˆì‹œ
    
    ```java
    Movie movie =new Movie("íƒ€ì´íƒ€ë‹‰",
    											Duration.ofMinutes(120),
    											Money.wons(10000),
    											new AmountDiscountPolicy( ... ));
    											movie.changeDiscountPolicy(new PercentDiscountPolicy( ... ));
    ```
    

**í•©ì„±ì„ ì‚¬ìš©í•˜ë©´**

- ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì¶”ê°€ ì‹œ Movie ìˆ˜ì • ë¶ˆí•„ìš”
- í• ì¸ ì •ì±… ë³€ê²½ì´ ë‹¨ìˆœí•œ ê°ì²´ êµì²´ë¡œ ê°€ëŠ¥ â†’ ìœ ì—°ì„± í™•ë³´
- ì˜ì¡´ì„±ì´ Movie â†’ DiscountPolicy í•˜ë‚˜ë¡œ ë‹¨ìˆœí™”
- ìƒì†ë³´ë‹¤ëŠ” í•©ì„±: ì‹¤í–‰ ì¤‘ ìœ ì—°ì„±ì´ í•„ìš”í•œ ê²½ìš° í•©ì„± ì‚¬ìš© ê¶Œì¥

ìœ ì—°ì„±ì€ ì˜ì¡´ì„± ê´€ë¦¬ì˜ ë¬¸ì œë‹¤. ìš”ì†Œë“¤ ì‚¬ì´ì˜ ì˜ì¡´ì„±ì˜ ì •ë„ê°€ ìœ ì—°ì„±ì˜ ì •ë„ë¥¼ ê²°ì •í•œë‹¤. ìœ ì—°ì„±ì˜ ì •ë„ì— ë”°ë¼ ê²°í•©ë„ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

![image.png](attachment:73d06111-dbad-4d01-97fa-ed009046f9d3:image.png)

## ì±…ì„ ì£¼ë„ ì„¤ê³„ì˜ ëŒ€ì•ˆ

ì±…ì„ ì£¼ë„ ì„¤ê³„(RDD)ì— ìµìˆ™í•˜ì§€ ì•Šë‹¤ë©´, ì¼ë‹¨ ë™ì‘í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•œ í›„ ë¦¬íŒ©í„°ë§ì„ í†µí•´ ì±…ì„ì„ ì˜¬ë°”ë¥¸ ê°ì²´ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì´ í˜„ì‹¤ì ì´ë‹¤. 

ì£¼ì˜í•  ì ì€ ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ì— ê²‰ìœ¼ë¡œ ë“œëŸ¬ë‚˜ëŠ” ë™ì‘ì´ ë°”ë€Œì–´ì„œëŠ” ì•ˆ ëœë‹¤ëŠ” ê²ƒì´ë‹¤.
ì´ì²˜ëŸ¼ ì´í•´í•˜ê¸° ì‰½ê³  ìˆ˜ì •í•˜ê¸° ì‰¬ìš´ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ê°œì„ í•˜ê¸° ìœ„í•´ ê²‰ìœ¼ë¡œ ë³´ì´ëŠ” ë™ì‘ì€ ë°”ê¾¸ì§€ ì•Šì€ ì±„ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë³€ê²½ =í•˜ëŠ” ê²ƒì„ ë¦¬íŒ©í„°ë§(Refactoring)ì´ë¼ê³  ë¶€ë¥¸ë‹¤[Fowler99a].

### ë©”ì„œë“œ ì‘ì§‘ë„

```java
public class ReservationAgency {
	public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
		Movie movie = screening.getMovie();
		
		boolean discountable = false;
		for(DiscountCondition condition : movie.getDiscountConditions()) {
			if (condition.getType() == DiscountConditionType.PERIOD) {
				discountable = screening.getWhenScreened().getDayOfWeek().equals(condition.getDayOfWeek()) &&
				condition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime()) <= 0 8&
				condition.getEndTime().compareTo(screening.getWhenScreened().toLocalTime()) >0;
			} else {
				discountable = condition.getSequence() == screening.getSequence();
			}
			
			if (discountable) {
				break;
			}
		}
		
		Money fee;
		if (discountable) {
			Money discountAmount = Money.ZERO;
			switch(movie.getMovieType()) {
				case AMOUNT_DISCOUNT:
					discountAmount = movie.getDiscountAmount();
					break;
				case PERCENT_DISCOUNT:
					discountAmount = movie.getFee().times(movie.getDiscountPercent());
					break;
				case NONE_DISCOUNT:
					discountAmount = Money.ZERO;
					break;
			}
		
			fee = movie.getFee().minus(discountAmount).times(audienceCount);
		} else {
			fee = movie.getFee().times(audienceCount);
		}
		return new Reservation(customer, screening, fee, audienceCount);
	}
}
```

**ë¬¸ì œ: reserve ë©”ì„œë“œëŠ” ê¸¸ì´ê°€ ë„ˆë¬´ ê¸¸ê³  ì´í•´í•˜ê¸° ì–´ë µë‹¤**

- ê¸´ ë©”ì„œë“œëŠ” ë‹¤ì–‘í•œ ì¸¡ë©´ì—ì„œ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
    - ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ëŸ½ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ì „ì²´ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë° ë„ˆë¬´ ë§ì€ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.
    - í•˜ë‚˜ì˜ ë©”ì„œë“œ ì•ˆì—ì„œ ë„ˆë¬´ ë§ì€ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë³€ê²½ì´ í•„ìš”í•  ë•Œ ìˆ˜ì •í•´ì•¼ í•  ë¶€ë¶„ì„ ì°¾ê¸° ì–´ë µë‹¤.
    - ë©”ì„œë“œ ë‚´ë¶€ì˜ ì¼ë¶€ ë¡œì§ë§Œ ìˆ˜ì •í•˜ë”ë¼ë„ ë©”ì„œë“œì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì—ì„œ ë²„ê·¸ê°€ ë°œìƒí•  í™•ë¥ ì´ ë†’ë‹¤.
    - ë¡œì§ì˜ ì¼ë¶€ë§Œ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
    - ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ì›í•˜ëŠ” ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ëŠ” ê²ƒë¿ì´ë¯€ë¡œ ì½”ë“œ ì¤‘ë³µì„ ì´ˆë˜í•˜ê¸° ì‰½ë‹¤.

**ë©”ì„œë“œë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•´ ì‘ì§‘ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.**

- ë©”ì„œë“œê°€ ëª…ë ¹ë¬¸ë“¤ì˜ ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±ë˜ê³  ê° ê·¸ë£¹ì— ì£¼ì„ì„ ë‹¬ì•„ì•¼ í•  í•„ìš”ê°€ ìˆë‹¤ë©´ ê·¸ ë©”ì„œë“œì˜ ì‘ì§‘ë„ëŠ” ë‚®ì€ ê²ƒì´ë‹¤.
- ì‘ì€ ë©”ì„œë“œëŠ” ëª©ì ì´ ëª…í™•í•˜ê³ , ë³€ê²½ ì´ìœ ê°€ ë‹¨ì¼í™”ëœë‹¤.
- ì´í•´í•˜ê¸° ì‰¬ìš°ë©°, ì½”ë“œ ì¬ì‚¬ìš©ê³¼ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•˜ë‹¤.

ê°ì²´ë¡œ ì±…ì„ì„ ë¶„ë°°í•  ë•Œ ê°€ì¥ ë¨¼ì € í•  ì¼ì€ ë©”ì„œë“œë¥¼ ì‘ì§‘ë„ ìˆëŠ” ìˆ˜ì¤€ìœ¼ë¡œ ë¶„í•´í•˜ëŠ” ê²ƒì´ë‹¤. ê¸´ ë©”ì„œë“œë¥¼ ì‘ê³  ì‘ì§‘ë„ ë†’ì€ ë©”ì„œë“œë¡œ ë¶„ë¦¬í•˜ë©´ ê° ë©”ì„œë“œë¥¼ ì ì ˆí•œ í´ë˜ìŠ¤ë¡œ ì´ë™í•˜ê¸°ê°€ ë” ìˆ˜ì›”í•´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

ì‘ì§‘ë„ ë†’ì€ ë©”ì„œë“œë“¤ë¡œ ì˜ê²Œ ë¶„í•´í•œ `ReservationAgency`

```java
public class ReservationAgency {
	public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
		boolean discountable = checkDiscountable(screening);
		Money fee = calculateFee(screening, discountable, audienceCount);
		return createReservation(screening, customer, audienceCount, fee);
	}
	
	private boolean checkDiscountable(Screening screening) {
		return screening.getMovie().getDiscountConditions().stream()
					.anyMatch(condition -> isDiscountable(condition, screening));
	}
	
	private boolean isDiscountable(DiscountCondition condition, Screening screening) {
		if (condition.getType() == DiscountConditionType.PERIOD) {
			return isSatisfiedByPeriod(condition, screening);
		}
		return isSatisfiedBySequence(condition, screening);
	}
	
	private boolean isSatisfiedByPeriod(DiscountCondition condition, Screening screening) {
		return screening.getWhenScreened().getDayOfWeek().equals(condition.getDayOfWeek()) &&
						condition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime()) <= 0 8&
						condition.getEndTime().compareTo (screening.getWhenScreened().toLocalTime()) > 0;
	}
	
	private boolean isSatisfiedBySequence(DiscountCondition condition, Screening screening) {
		return condition.getSequence() == screening.getSequence();
	}
	
	private Money calculateFee(Screening screening, boolean discountable, int audienceCount) {
		if (discountable) {
			return screening.getMovie().getFee()
							.minus(calculateDiscountedFee(screening.getMovie()))
							.times(audienceCount);
		}
		return screening.getMovie().getFee().times(audienceCount);
	}
	
	private Money calculateDiscountedFee(Movie movie) {
		switch(movie.getMovieType()) {
			case AMOUNT_DISCOUNT:
				return calculateAmountDiscountedFee(movie);
			case PERCENT_DISCOUNT:
				return calculatePercentDiscountedFee(movie);
			case NONE_DISCOUNT:
				return calculateNoneDiscountedFee(movie);
		}
		
		throw new IllegalArgumentException();
	}
	
	private Money calculateAmountDiscountedFee(Movie movie) {
		return movie.getDiscountAmount();
	}
	
	private Money calculatePercentDiscountedFee(Movie movie) {
		return movie.getFee().times(movie.getDiscountPercent());
	}
	
	private Money calculateNoneDiscountedFee(Movie movie) {
		return Money.ZERO;
	}
	
	private Reservation createReservation(Screening screening,
		Customer customer, int audienceCount, Money fee) {
		return new Reservation(customer, screening, fee, audienceCount);
	}
}
```

- ì˜¤ì§ í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ìˆ˜í–‰
- í•˜ë‚˜ì˜ ë³€ê²½ ì´ìœ ë§Œ ê°€ì§€ëŠ” ì‘ê³ , ëª…í™•í•˜ê³ , ì‘ì§‘ë„ê°€ ë†’ì€ ë©”ì„œë“œë“¤ë¡œ êµ¬ì„±
- í´ë˜ìŠ¤ì˜ ê¸¸ì´ëŠ” ë” ê¸¸ì–´ì¡Œì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ëª…í™•ì„±ì˜ ê°€ì¹˜ê°€ í´ë˜ìŠ¤ì˜ ê¸¸ì´ë³´ë‹¤ ë” ì¤‘ìš”í•˜ë‹¤

```java
public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
	boolean discountable = checkDiscountable(screening);
	Money fee = calculateFee(screening, discountable, audienceCount);
	return createReservation(screening, customer, audienceCount, fee);
}
```

ìˆ˜ì • í›„ reserve ë©”ì„œë“œë¥¼ ë³´ë©´

- ë©”ì„œë“œê°€ ì–´ë–¤ ì¼ì„ í•˜ëŠ”ì§€ë¥¼ í•œëˆˆì— ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤.
- ì½”ë“œë¥¼ ë³€ê²½í•˜ê¸° ì‰½ë‹¤.
    - í• ì¸ ì¡°ê±´ ì¤‘ì—ì„œ ê¸°ê°„ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” ê·œì¹™ì´ ë³€ê²½ëœë‹¤ë©´ `isSatisfiedByPeriod`ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
    - í• ì¸ ê·œì¹™ ì¤‘ì—ì„œ ê¸ˆì•¡ í• ì¸ ê·œì¹™ì´ ë³€ê²½ëœë‹¤ë©´ calculateAmountDiscountedFee ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
    - ì˜ˆë§¤ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ê·œì¹™ì´ ë³€ê²½ëœë‹¤ë©´ calculateFee ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

í•˜ì§€ë§Œ ì•„ì§ ReservationAgencyì˜ ì‘ì§‘ë„ëŠ” ì—¬ì „íˆ ë‚®ë‹¤. ReservationAgencyì˜ ì‘ì§‘ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ì„œëŠ” ë³€ê²½ì˜ ì´ìœ ê°€ ë‹¤ë¥¸ ë©”ì„œë“œë“¤ì„ ì ì ˆí•œ ìœ„ì¹˜ë¡œ ë¶„ë°°í•´ì•¼ í•œë‹¤. 

### ê°ì²´ë¥¼ ììœ¨ì ìœ¼ë¡œ ë§Œë“¤ì

ë©”ì„œë“œê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ê°€ ìˆëŠ” ê°ì²´ë¡œ ì´ë™ì‹œí‚¤ë©´, ììœ¨ì ì¸ ê°ì²´ê°€ ëœë‹¤!

ì–´ë–¤ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ê°€ì¥ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë©”ì„œë“œ ì•ˆì—ì„œ ì–´ë–¤ í´ë˜ìŠ¤ì˜ ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ íŒŒì•…í•˜ëŠ” ê²ƒ

```java
public class ReservationAgency {
	private boolean isDiscountable(DiscountCondition condition, Screening screening) {
		if (condition.getType() == DiscountConditionType.PERIOD) {
			return isSatisfiedByPeriod(condition, screening);
		}
		return isSatisfiedBySequence(condition, screening);
	}
	
	private boolean isSatisfiedByPeriod(DiscountCondition condition, Screening screening) {
		return screening.getWhenScreened().getDayOfWeek().equals(condition.getDayOfWeek()) &&
						condition.getStartTime().compareTo (screening.getWhenScreened().toLocalTime()) <= 0 &&
						condition.getEndTime().compareTo(screening.getWhenScreened().toLocalTime()) >= 0;
	}
	
	private boolean isSatisfiedBySequence(DiscountCondition condition,Screening screening) {
		return condition.getSequence() == screening.getSequence();
	}
}
```

- `DiscountCondition.getType()` ë©”ì„œë“œë¥¼ í˜¸ì¶œ í›„ í• ì¸ ì¡°ê±´ íƒ€ì…ì— ë”°ë¼ `isSatisfiedBySequence`ë©”ì„œë“œë‚˜ `isSatisfiedByPeriod`ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
- isSatisfiedBySequence ë©”ì„œë“œì™€ isSatisfiedByPeriod ë©”ì„œë“œë„ í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•´ `DiscountCondition`ì˜ ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ì´ìš©í•œë‹¤.

â‡’ ë‘ ë©”ì„œë“œëŠ” ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” `DiscountCondition`ìœ¼ë¡œ ì´ë™í•˜ê³  `ReservationAgency`ì—ì„œ ì‚­ì œí•œë‹¤.

```java
public class DiscountCondition {
	private DiscountConditionType type;
	private int sequence;
	private DayOfWeek dayOfWeek;
	private LocalTime startTime;
	private LocalTime endTime;
	
	public boolean isDiscountable(Screening screening) {
		if (type == DiscountConditionType.PERIOD) {
			return isSatisfiedByPeriod(screening);
		}
		return isSatisfiedBySequence(screening);
	}
	
	private boolean isSatisfiedByPeriod(Screening screening) {
		return screening.getWhenScreened().getDayOfWeek().equals(dayOfWeek) &&
						startTime.compareTo(screening.getWhenScreened().toLocalTime()) <= 0 8&
						endTime.compareTo(screening.getWhenScreened().toLocalTime()) >0;
	}
	
	private boolean isSatisfiedBySequence(Screening screening) {
		return sequence == screening.getSequence();
	}
}
```

- isDiscountable ë©”ì„œë“œëŠ” ì™¸ë¶€ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•´ì•¼ í•˜ë¯€ë¡œ `private`â†’ `public`
- ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œ ì´ë™ì‹œí‚¬ ë•ŒëŠ” ì¸ìì— ì •ì˜ëœ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ê°€ ì¼ë°˜ì ì´ë‹¤.
    - isDiscountableë©”ì„œë“œëŠ” DiscountCondition ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¸ìë¡œ ì „ë‹¬ë°›ì„ í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤.
- DiscountCondition ë‚´ë¶€ì—ì„œë§Œ DiscountConditionì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì ‘ê·¼í•œë‹¤.
    - ëª¨ë“  ì ‘ê·¼ì ì œê±°, DiscountConditionì˜ ë‚´ë¶€ êµ¬í˜„ì„ ìº¡ìŠí™”
    - ëª¨ë“  í• ì¸ ì¡°ê±´ ê³„ì‚° ë¡œì§ì´ DiscountConditionì— ëª¨ì—¬ìˆë‹¤  â†’ ì‘ì§‘ë„ â«

```java
public class ReservationAgency {
	private boolean checkDiscountable(Screening screening) {
		return screening.getMovie().getDiscountConditions().stream()
					.anyMatch(condition -> condition.isDiscountable(screening));
	}
}
```

- ë‚´ë¶€ êµ¬í˜„ì„ ë…¸ì¶œí•˜ëŠ” ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ë©”ì‹œì§€ë¥¼ í†µí•´ì„œë§Œ DiscountCanditionê³¼ í˜‘ë ¥

ë³€ê²½ í›„ ì½”ë“œëŠ” ì±…ì„ ì£¼ë„ ì„¤ê³„ë¥¼ ì ìš©í•œ `DiscountCondition` í´ë˜ìŠ¤ ì´ˆê¸° ëª¨ìŠµê³¼ ìœ ì‚¬í•´ì¡Œë‹¤. ì—¬ê¸°ì— Polymorphismê³¼ Protected Variations íŒ¨í„´ì„ ì ìš©í•˜ë©´ ìµœì¢… ì„¤ê³„ì™€ ê±°ì˜ ë™ì¼í•œ êµ¬ì¡°ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ë²•ì— ìµìˆ™í•˜ì§€ ì•Šë‹¤ë©´ ì¼ë‹¨ ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ êµ¬í˜„í•œ í›„ ì´ë¥¼ ë¦¬íŒ©í„°ë§í•˜ë”ë¼ë„ ìœ ì‚¬í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì²˜ìŒë¶€í„° ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ë²•ì„ ë”°ë¥´ëŠ” ê²ƒë³´ë‹¤ ë™ì‘í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•œ í›„ì— ë¦¬íŒ©í„°ë§í•˜ëŠ” ê²ƒì´ ë” í›Œë¥­í•œ ê²°ê³¼ë¬¼ì„ ë‚³ì„ ìˆ˜ë„ ìˆë‹¤. ìº¡ìŠí™”, ê²°í•©ë„, ì‘ì§‘ë„ë¥¼ ì´í•´í•˜ê³  í›Œë¥­í•œ ê°ì²´ì§€í–¥ ì›ì¹™ì„ ì ìš©í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•œë‹¤ë©´ ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ë²•ì„ ë‹¨ê³„ì ìœ¼ë¡œ ë”°ë¥´ì§€ ì•Šë”ë¼ë„ ìœ ì—°í•˜ê³  ê¹”ë”í•œ ì½”ë“œë¥¼ ì–»ì„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.